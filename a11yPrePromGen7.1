javascript:(function(){const a=window.location.hostname.includes('chatgpt.com');if(!a){try{localStorage.setItem('loadA11yPersona','true');window.open('https://chatgpt.com','_blank')}catch(e){alert('Unable to set localStorage. Please enable localStorage or try running the bookmarklet directly on ChatGPT.')}return}const resources={accessibility:null,ux:null};function loadResource(url,resourceKey){fetch(url).then(response=>{if(!response.ok){throw new Error(`Failed to load ${url}: ${response.status} ${response.statusText}`)}return response.json()}).then(data=>{resources[resourceKey]=data;checkAllResourcesLoaded()}).catch(error=>{alert(`Error loading ${url}: ${error.message}`)})}function checkAllResourcesLoaded(){if(resources.accessibility&&resources.ux){b()}}function b(){if(document.getElementById("a11y-persona-generator"))return;function c(){if(!document.getElementById("a11y-persona-theme-styles")){const t=document.createElement("style");t.id="a11y-persona-theme-styles";t.textContent=`.a11y-light-theme{background-color:white!important;color:#000!important}.a11y-light-theme select{background-color:white!important;color:#000!important;border-color:#ccc!important}.a11y-dark-theme{background-color:#222!important;color:#fff!important}.a11y-dark-theme select{background-color:#222!important;color:#fff!important;border-color:#444!important}#generate-btn{background-color:#49A74C!important;color:white!important}#copy-btn{background-color:#0B78D0!important;color:white!important}#close-btn,#style-toggle,#theme-toggle{background-color:transparent!important}`;document.head.appendChild(t)}}const d={"default":"position:fixed;top:20px;right:20px;padding:15px;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,0.3);z-index:10000;width:300px;font-family:Arial,sans-serif;","fullHeight":"position:absolute;top:0px;right:0px;padding:15px;box-shadow:rgba(0, 0, 0, 0.3) 0px 0px 10px;z-index:10000;width:300px;font-family:Arial,sans-serif;height:100vh;margin:0px;"},e={"light":{bg:"white",text:"#000",border:"#ccc"},"dark":{bg:"#222",text:"#fff",border:"#444"}};let f="default",g="light";const h=document.createElement("div");h.id="a11y-persona-generator";h.style.cssText=d.default;h.innerHTML='<h2 style="color:#147CBD;margin:28px 0 10px 0;font-size:1.2em">a11y Persona Generator</h2><div style="display:flex;justify-content:end;position:absolute;top:12px;float:right;right:30px;"><button id="style-toggle" style="margin:0px 3px;background-color:transparent;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Panel Style" aria-label="Toggle Panel Style"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line></svg></button><button id="theme-toggle" style="background-color:transparent;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Theme" aria-label="Toggle Theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><label style="display:block;margin-bottom:5px;font-size:14px">Select knowledge base:</label><select id="source-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="source1">Accessibility Guidelines</option><option value="source2">UX Best Practices</option></select><label style="display:block;margin-bottom:5px;font-size:14px">Select digital product feature:</label><select id="feature-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="navigation">Navigation and Menus</option><option value="forms">Forms and Input Fields</option><option value="multimedia">Multimedia (Video, Audio)</option><option value="responsive">Responsive Layouts</option><option value="tables">Data Tables and Information Display</option><option value="notifications">Notifications and Alerts</option><option value="controls">User Interactions and Controls</option><option value="structure">Document Structure</option><option value="search">Search Functionality</option><option value="social">Social Media Integration</option></select><label style="display:block;margin-bottom:5px;font-size:14px">Number of personas:</label><select id="persona-count" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select><div style="display:flex;gap:10px;margin-bottom:10px"><button id="generate-btn" style="flex:1;padding:8px;background-color:#49A74C;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Inject</button><button id="copy-btn" style="flex:1;padding:8px;background-color:#0B78D0;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Copy</button></div><button id="close-btn" aria-label="close a11y persona generator" style="position:absolute;top:10px;right:10px;background-color:transparent;border:none;cursor:pointer;font-size:16px;font-weight:bold">âœ•</button>';document.body.appendChild(h);c();h.className="a11y-light-theme";function i(){document.body.removeChild(h);document.removeEventListener("keydown",j)}function j(t){t.key==="Escape"&&i()}document.addEventListener("keydown",j);document.getElementById("close-btn").onclick=i;document.getElementById("generate-btn").onclick=p;document.getElementById("copy-btn").onclick=q;document.getElementById("source-select").onchange=k;document.getElementById("style-toggle").onclick=function(){if(f==="default"){f="fullHeight";this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>';this.title="Switch to Floating Panel"}else{f="default";this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line></svg>';this.title="Switch to Full Height Sidebar"}const t=h.className;h.style.cssText=d[f];h.className=t};document.getElementById("theme-toggle").onclick=function(){if(g==="light"){g="dark";this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>';this.title="Switch to Light Theme";h.className="a11y-dark-theme"}else{g="light";this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>';this.title="Switch to Dark Theme";h.className="a11y-light-theme"}};const n={source1:resources.accessibility,source2:resources.ux};let o=n.source1;function k(){const t=document.getElementById("source-select");o=n[t.value];const u=document.getElementById("feature-select");u.innerHTML="";Object.keys(o.features).forEach(v=>{const w=document.createElement("option");w.value=v;w.textContent=o.features[v].title;u.appendChild(w)})}function r(t){for(let u=t.length-1;u>0;u--){const v=Math.floor(Math.random()*(u+1));[t[u],t[v]]=[t[v],t[u]]}return t}function s(t,u){const v=o.disabilityCategories[t]||Object.keys(o.personas).map(w=>o.personas[w].category);let w=[];o.personas.forEach(x=>{if(v.includes(x.category)){x.examples.forEach(y=>{w.push({...y,category:x.category})})}});w=r(w);return w.slice(0,u)}function generatePrePrompt(){const t=document.getElementById("feature-select"),u=parseInt(document.getElementById("persona-count").value),v=t.value,w=o.features[v],x=s(v,u);let y=`# ${o.name} Pre-prompt for ${w.title}\n\n`;y+="## Key Design Considerations\n",w.considerations.forEach(z=>{y+=`- ${z}\n`});if(w.wcagGuidelines){y+="\n## Relevant WCAG Guidelines\n",w.wcagGuidelines.forEach(z=>{y+=`- WCAG ${z}\n`})}return w.principles&&(y+="\n## UX Design Principles\n",w.principles.forEach(z=>{y+=`- ${z}\n`})),y+="\n## User Scenarios\n",w.userStories.forEach(z=>{y+=`- ${z}\n`}),y+=`\n## Personas with ${o===n.source1?"Accessibility":"UX"} Needs\n`,x.forEach((z,A)=>{y+=`\n### Persona ${A+1}: ${z.name}\n`,z.age&&(y+=`- Age: ${z.age}\n`),o===n.source1?(y+=`- Accessibility Need: ${z.disability} (${z.category})\n`,y+=`- Assistive Technology: ${z.tools}\n`,y+=`- Key Challenges: ${z.challenges}\n`):(y+=`- Context: ${z.context}\n`,y+=`- Tools: ${z.tools}\n`,y+=`- Key Challenges: ${z.challenges}\n`),y+=`- Background: ${z.description}\n`}),y+="\n## Design Request\nBased on the information above, please:\n\n",o===n.source1?(y+="1. **Enhance the provided personas** - Expand on these personas to make them more realistic and detailed, following the W3C WAI user stories model. Include:\n   - Daily technology habits and preferences\n   - Specific scenarios showing how they interact with this feature\n   - Emotional aspects of their user experience\n   - Social contexts where they use digital products\n\n2. **Provide accessible design considerations** for "+w.title+" that address the needs of the personas. Include:\n   - Specific technical implementations (with code examples where relevant)\n   - Design patterns that would work well\n   - Potential pitfalls to avoid\n   - Opportunities to exceed minimum compliance requirements\n\n"):(y+="1. **Enhance the provided personas** - Expand on these personas to make them more realistic and detailed. Include:\n   - Technology preferences and behaviors\n   - Specific user journeys showing interaction with this feature\n   - Pain points and moments of delight\n   - Context and environment considerations\n\n2. **Provide UX design considerations** for "+w.title+" that address the needs of the personas. Include:\n   - Innovative interface solutions\n   - Best practice implementations\n   - Common UX pitfalls to avoid\n   - Metrics to measure success\n\n"),y+="3. **Create user stories** that illustrate how these personas would interact with an "+(o===n.source1?"accessible":"optimal")+" implementation of this feature, highlighting:\n   - The journey through the feature\n   - Pain points that proper "+(o===n.source1?"accessibility":"UX design")+" would solve\n   - Moments of delight when "+(o===n.source1?"accessibility":"user experience")+" is done well\n\nPlease write in a practical, actionable style that balances technical accuracy with human-centered design thinking.",y}function p(){const t=generatePrePrompt(),u=document.querySelector("div#prompt-textarea p.placeholder");if(u){u.innerText=t;u.dispatchEvent(new Event("input",{bubbles:true}));setTimeout(()=>{const v=document.querySelector('button[data-testid="send-button"]');v&&v.click();i()},100)}else alert("Target placeholder not found!")}function q(){const t=generatePrePrompt();navigator.clipboard.writeText(t).then(()=>{const u=document.getElementById("copy-btn"),v=u.innerText;u.innerText="Copied!";u.style.backgroundColor="#4CAF50";setTimeout(()=>{u.innerText=v;u.style.backgroundColor="#0B78D0"},1500)}).catch(u=>{alert("Failed to copy: "+u)})}k()}function r(){const t=localStorage.getItem('loadA11yPersona');if(t==='true'){localStorage.removeItem('loadA11yPersona');let u=0,v=10;function w(){u++;if(u>v){console.log("A11y tool initialization failed after maximum attempts");return}if(document.querySelector("#prompt-textarea")||document.querySelector("div#prompt-textarea")){loadResource('agSRC.js','accessibility');loadResource('uxSRC.js','ux')}else{setTimeout(w,1000)}}setTimeout(w,1000)}}if(a&&window.location.hash!=='#loadingA11y'){loadResource('agSRC.js','accessibility');loadResource('uxSRC.js','ux')}if(a){if(document.readyState==="complete"){r()}else{window.addEventListener("load",r)}}})();
