javascript:(function(){var k={accessibility:"https://zachbatx.github.io/zFiles/load_kb_a11y.js",ux:"https://zachbatx.github.io/zFiles/load_kb_ux.js"},c=null,s={default:"position:fixed;top:20px;right:20px;padding:15px;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,0.3);z-index:10000;width:300px;font-family:Arial,sans-serif;",fullHeight:"position:absolute;top:0;right:0;padding:15px;box-shadow:0 0 10px rgba(0,0,0,0.3);z-index:10000;width:300px;font-family:Arial,sans-serif;height:100vh;margin:0;"},t={light:{bg:"white",text:"#000",border:"#ccc"},dark:{bg:"#222",text:"#fff",border:"#444"}},D=!0,currentStyle="default",currentTheme="light";function addThemeStyles(){if(!document.getElementById("a11y-persona-theme-styles")){const t=document.createElement("style");t.id="a11y-persona-theme-styles",t.textContent=".a11y-light-theme{background-color:white!important;color:#000!important}.a11y-light-theme select{background-color:white!important;color:#000!important;border-color:#ccc!important}.a11y-dark-theme{background-color:#222!important;color:#fff!important}.a11y-dark-theme select{background-color:#222!important;color:#fff!important;border-color:#444!important}#generate-btn{background-color:#49A74C!important;color:white!important}#copy-btn{background-color:#0B78D0!important;color:white!important}#close-btn,#style-toggle,#theme-toggle{background-color:transparent!important}",document.head.appendChild(t)}}function l(m,t){if(D){t==="error"?console.error("[Pre-prompt Generator] "+m):console.log("[Pre-prompt Generator] "+m)}}function L(u,C,E){l("Attempting to load: "+u);var S=document.getElementById("load-status");S&&(S.textContent="Loading: "+u,S.style.color="orange");var T=document.createElement("script");T.src=u;var O=setTimeout(function(){l("Script load timeout, trying alternative method: "+u,"error"),F(u,C,E)},3e3);T.onload=function(){clearTimeout(O),l("Script loaded successfully: "+u),S&&(S.textContent="Loaded: "+u,S.style.color="green"),setTimeout(function(){C()},100)},T.onerror=function(e){clearTimeout(O),l("Error loading script via standard method: "+u,"error"),S&&(S.textContent="Standard load failed, trying fetch method...",S.style.color="red"),F(u,C,E)},document.head.appendChild(T)}function F(u,C,E){l("Attempting fetch method for: "+u);var S=document.getElementById("load-status");S&&(S.textContent="Trying fetch method: "+u,S.style.color="orange"),fetch(u).then(function(r){if(!r.ok)throw new Error("Network response was not ok: "+r.status);return r.text()}).then(function(t){l("Script fetched, evaluating content...");try{new Function(t)(),l("Script evaluated successfully"),S&&(S.textContent="Script loaded via fetch: "+u,S.style.color="green"),setTimeout(function(){C()},100)}catch(e){l("Error evaluating script: "+e.message,"error"),S&&(S.textContent="Error evaluating script: "+e.message,S.style.color="red"),E("Failed to evaluate the loaded script. Error: "+e.message)}}).catch(function(e){l("Fetch error: "+e.message,"error"),S&&(S.textContent="Failed to load script: "+e.message,S.style.color="red"),E("Failed to load script. The server might be down or the site may be blocking external requests.")})}function K(){var e=document.getElementById("source-select").value,S=document.getElementById("load-status");if("accessibility"===e)window.kbAccessibility?(c=window.kbAccessibility,U(),S&&(S.textContent="Using cached accessibility data",S.style.color="green")):(S&&(S.textContent="Loading accessibility data..."),L(k.accessibility,function(){window.kbAccessibility?(c=window.kbAccessibility,U()):(l("Script loaded but kbAccessibility is not defined","error"),S&&(S.textContent="Error: Data loaded but not accessible",S.style.color="red"),P("Script loaded, but the accessibility data is not available. The script might be corrupted."))},function(e){P("Failed to load accessibility data. "+e)}));else if("ux"===e)window.kbUX?(c=window.kbUX,U(),S&&(S.textContent="Using cached UX data",S.style.color="green")):(S&&(S.textContent="Loading UX data..."),L(k.ux,function(){window.kbUX?(c=window.kbUX,U()):(l("Script loaded but kbUX is not defined","error"),S&&(S.textContent="Error: Data loaded but not accessible",S.style.color="red"),P("Script loaded, but the UX data is not available. The script might be corrupted."))},function(e){P("Failed to load UX data. "+e)}))}function P(e){var S=document.getElementById("load-status");S&&(S.textContent=e,S.style.color="red"),document.getElementById("generate-btn").disabled=!0,document.getElementById("copy-btn").disabled=!0,document.getElementById("feature-select").innerHTML='<option value="">Error loading data</option>',document.getElementById("feature-select").disabled=!0,alert("Loading Error: "+e+"\n\nPlease try again or check if the website allows loading external scripts.")}function U(){var e=document.getElementById("feature-select");if(e.innerHTML="",e.disabled=!1,!c||!c.features)return l("Error: currentKB or currentKB.features is undefined","error"),e.innerHTML='<option value="">Error loading features</option>',e.disabled=!0,document.getElementById("generate-btn").disabled=!0,void(document.getElementById("copy-btn").disabled=!0);document.getElementById("generate-btn").disabled=!1,document.getElementById("copy-btn").disabled=!1;for(var t in c.features){var n=document.createElement("option");n.value=t,n.textContent=c.features[t].title,e.appendChild(n)}}function G(){var e=document.getElementById("feature-select"),t=2,n=e.value;if(!c||!c.features||!c.features[n])return"Error: Could not generate pre-prompt. Data not loaded correctly.";var r=c.features[n],a="# "+c.name+" Pre-prompt for "+r.title+"\n\n## Key Design Considerations\n";return r.considerations.forEach(function(e){a+="- "+e+"\n"}),a+="\n",r.wcagGuidelines&&(a+="## Relevant WCAG Guidelines\n",r.wcagGuidelines.forEach(function(e){a+="- WCAG "+e+"\n"}),a+="\n"),r.principles&&(a+="## UX Design Principles\n",r.principles.forEach(function(e){a+="- "+e+"\n"}),a+="\n"),a+="## User Scenarios\n",r.userStories.forEach(function(e){a+="- "+e+"\n"}),a+="\n## Personas with "+(c.name.includes("Accessibility")?"Accessibility":"UX")+" Needs\n",function s(u,C){const v=c.disabilityCategories[u]||[];let w=[];return c.personas.forEach(x=>{if(v.includes(x.category))x.examples.forEach(y=>{w.push({...y,category:x.category})})}),w=function r(t){for(let u=t.length-1;u>0;u--){const v=Math.floor(Math.random()*(u+1));[t[u],t[v]]=[t[v],t[u]]}return t}(w),w.slice(0,C)}(n,t).forEach((z,A)=>{a+=`\n### Persona ${A+1}: ${z.name}\n`,z.age&&(a+=`- Age: ${z.age}\n`),c.name.includes("Accessibility")?(a+=`- Accessibility Need: ${z.disability} (${z.category})\n`,a+=`- Assistive Technology: ${z.tools}\n`,a+=`- Key Challenges: ${z.challenges}\n`):(a+=`- Context: ${z.context}\n`,a+=`- Tools: ${z.tools}\n`,a+=`- Key Challenges: ${z.challenges}\n`),a+=`- Background: ${z.description}\n`}),a+="\n## Design Request\nBased on the information above, please:\n\n",c.name.includes("Accessibility")?(a+="1. **Enhance the provided personas** - Expand on these personas to make them more realistic and detailed, following the W3C WAI user stories model. Include:\n   - Daily technology habits and preferences\n   - Specific scenarios showing how they interact with this feature\n   - Emotional aspects of their user experience\n   - Social contexts where they use digital products\n\n2. **Provide accessible design considerations** for "+r.title+" that address the needs of the personas. Include:\n   - Specific technical implementations (with code examples where relevant)\n   - Design patterns that would work well\n   - Potential pitfalls to avoid\n   - Opportunities to exceed minimum compliance requirements\n\n"):(a+="1. **Enhance the provided personas** - Expand on these personas to make them more realistic and detailed. Include:\n   - Technology preferences and behaviors\n   - Specific user journeys showing interaction with this feature\n   - Pain points and moments of delight\n   - Context and environment considerations\n\n2. **Provide UX design considerations** for "+r.title+" that address the needs of the personas. Include:\n   - Innovative interface solutions\n   - Best practice implementations\n   - Common UX pitfalls to avoid\n   - Metrics to measure success\n\n"),a+="3. **Create user stories** that illustrate how these personas would interact with an "+(c.name.includes("Accessibility")?"accessible":"optimal")+" implementation of this feature, highlighting:\n   - The journey through the feature\n   - Pain points that proper "+(c.name.includes("Accessibility")?"accessibility":"UX design")+" would solve\n   - Moments of delight when "+(c.name.includes("Accessibility")?"accessibility":"user experience")+" is done well\n\nPlease write in a practical, actionable style that balances technical accuracy with human-centered design thinking.",a}function I(){var e=G(),t=document.querySelector("div#prompt-textarea p.placeholder");t?(t.innerText=e,t.dispatchEvent(new Event("input",{bubbles:!0})),setTimeout(function(){var e=document.querySelector('button[data-testid="send-button"]');e&&e.click(),R()},100)):alert("Target placeholder not found!")}function J(){var e=G();navigator.clipboard.writeText(e).then(function(){var e=document.getElementById("copy-btn"),t=e.innerText;e.innerText="Copied!",e.style.backgroundColor="#4CAF50",setTimeout(function(){e.innerText=t,e.style.backgroundColor="#0B78D0"},1500)}).catch(function(e){alert("Copy failed: "+e)})}function R(){document.body.removeChild(p),document.removeEventListener("keydown",Y)}function Y(e){"Escape"===e.key&&R()}addThemeStyles();var p=document.createElement("div");p.id="a11y-persona-generator",p.style.cssText=s.default,p.className="a11y-light-theme",p.innerHTML='<h2 style="color:#147CBD;margin:28px 0 10px 0;font-size:1.2em">Pre-prompt Generator</h2><div style="display:flex;justify-content:end;position:absolute;top:12px;float:right;right:30px;"><button id="style-toggle" style="margin:0px 3px;background-color:transparent;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Panel Style" aria-label="Toggle Panel Style"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line></svg></button><button id="theme-toggle" style="background-color:transparent;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Theme" aria-label="Toggle Theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><div id="load-status" style="margin-bottom:10px;padding:5px;background:#f0f0f0;border-radius:3px;font-size:12px;color:orange;">Ready to load data...</div><label style="display:block;margin-bottom:5px;font-size:14px">Select knowledge base:</label><select id="source-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="accessibility">Accessibility Guidelines</option><option value="ux">UX Best Practices</option></select><label style="display:block;margin-bottom:5px;font-size:14px">Select feature:</label><select id="feature-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"></select><div style="display:flex;gap:10px;margin-bottom:10px"><button id="generate-btn" style="flex:1;padding:8px;background:#49A74C;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Inject Pre-prompt</button><button id="copy-btn" style="flex:1;padding:8px;background:#0B78D0;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Copy Pre-prompt</button></div><button id="close-btn" aria-label="close a11y persona generator" style="position:absolute;top:10px;right:10px;background-color:transparent;border:none;cursor:pointer;font-size:16px;font-weight:bold">✕</button>';document.body.appendChild(p);document.getElementById("close-btn").onclick=R;document.getElementById("generate-btn").onclick=I;document.getElementById("copy-btn").onclick=J;document.getElementById("source-select").onchange=K;document.addEventListener("keydown",Y);document.getElementById("generate-btn").disabled=!0;document.getElementById("copy-btn").disabled=!0;document.getElementById("style-toggle").onclick=function(){if(currentStyle==="default"){currentStyle="fullHeight",this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>',this.title="Switch to Floating Panel"}else{currentStyle="default",this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line></svg>',this.title="Switch to Full Height Sidebar"}const t=p.className;p.style.cssText=s[currentStyle],p.className=t};document.getElementById("theme-toggle").onclick=function(){if(currentTheme==="light"){currentTheme="dark",this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',this.title="Switch to Light Theme",p.className="a11y-dark-theme"}else{currentTheme="light",this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>',this.title="Switch to Light Theme",p.className="a11y-light-theme"}};K()})();