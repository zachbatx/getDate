javascript:(function(){var ks={accessibility:"https://zachbatx.github.io/zFiles/load_a11y.js",ux:"https://zachbatx.github.io/zFiles/load_ux.js"},currentKB=null,u="default",v="light",s={default:"position:fixed;top:20px;right:20px;padding:15px;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,0.3);z-index:10000;width:300px;font-family:Arial,sans-serif;",fullHeight:"position:absolute;top:0;right:0;padding:15px;box-shadow:0 0 10px rgba(0,0,0,0.3);z-index:10000;width:300px;font-family:Arial,sans-serif;height:100vh;margin:0;"} ,t={light:{bg:"white",text:"#000",border:"#ccc"},dark:{bg:"#222",text:"#fff",border:"#444"}};function loadScript(url,cb){var s=document.createElement("script");s.src=url;s.onload=cb;s.onerror=function(){alert("Failed loading "+url)};document.head.appendChild(s)}function onKBChange(){var kbId=document.getElementById("source-select").value;if(kbId==="accessibility"){if(!window.kbAccessibility){loadScript(ks.accessibility,function(){currentKB=window.kbAccessibility;updateFeatures()})}else{currentKB=window.kbAccessibility;updateFeatures()}}else if(kbId==="ux"){if(!window.kbUX){loadScript(ks.ux,function(){currentKB=window.kbUX;updateFeatures()})}else{currentKB=window.kbUX;updateFeatures()}}}function updateFeatures(){var sel=document.getElementById("feature-select");sel.innerHTML="";for(var key in currentKB.features){var opt=document.createElement("option");opt.value=key;opt.textContent=currentKB.features[key].title;sel.appendChild(opt)}}function generatePrePrompt(){var fs=document.getElementById("feature-select"),pc=parseInt(document.getElementById("persona-count").value,10),fid=fs.value,feat=currentKB.features[fid],prompt="# "+currentKB.name+" Pre-prompt for "+feat.title+"\n\n## Key Design Considerations\n";feat.considerations.forEach(function(c){prompt+="- "+c+"\n"});return prompt}function injectPrompt(){var p=generatePrePrompt(),tEl=document.querySelector("div#prompt-textarea p.placeholder");if(tEl){tEl.innerText=p;tEl.dispatchEvent(new Event("input",{bubbles:true}));setTimeout(function(){var btn=document.querySelector('button[data-testid="send-button"]');btn&&btn.click();removePanel()},100)}else alert("Target placeholder not found!")}function copyPrompt(){var p=generatePrePrompt();navigator.clipboard.writeText(p).then(function(){var btn=document.getElementById("copy-btn"),orig=btn.innerText;btn.innerText="Copied!";btn.style.backgroundColor="#4CAF50";setTimeout(function(){btn.innerText=orig;btn.style.backgroundColor="#2196F3"},1500)})["catch"](function(err){alert("Copy failed: "+err)})}function removePanel(){document.body.removeChild(panel);document.removeEventListener("keydown",onKeyDown)}function onKeyDown(e){if(e.key==="Escape")removePanel()}var panel=document.createElement("div");panel.style.cssText=s.default+"background-color:white;color:#000;";panel.innerHTML='<h2 style="margin:0 0 10px 0;font-size:16px">Pre-prompt Generator</h2><div style="display:flex;justify-content:end;margin-bottom:10px"><button id="style-toggle" style="background:transparent;border:1px solid #ccc;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Panel Style">[Toggle]</button><button id="theme-toggle" style="background:transparent;border:1px solid #ccc;border-radius:3px;padding:3px;cursor:pointer" title="Toggle Theme">[Theme]</button></div><label style="display:block;margin-bottom:5px;font-size:14px">Select knowledge base:</label><select id="source-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="accessibility">Accessibility Guidelines</option><option value="ux">UX Best Practices</option></select><label style="display:block;margin-bottom:5px;font-size:14px">Select feature:</label><select id="feature-select" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"></select><label style="display:block;margin-bottom:5px;font-size:14px">Number of personas:</label><select id="persona-count" style="width:100%;padding:5px;margin-bottom:15px;border-radius:3px;border:1px solid #ccc"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select><div style="display:flex;gap:10px;margin-bottom:10px"><button id="generate-btn" style="flex:1;padding:8px;background:#4CAF50;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Inject Pre-prompt</button><button id="copy-btn" style="flex:1;padding:8px;background:#2196F3;color:white;border:none;border-radius:3px;cursor:pointer;font-weight:bold">Copy Pre-prompt</button></div><button id="close-btn" style="position:absolute;top:10px;right:10px;background:transparent;border:none;cursor:pointer;font-size:16px;font-weight:bold">âœ•</button>';document.body.appendChild(panel);document.getElementById("close-btn").onclick=removePanel;document.getElementById("generate-btn").onclick=injectPrompt;document.getElementById("copy-btn").onclick=copyPrompt;document.getElementById("source-select").onchange=onKBChange;document.addEventListener("keydown",onKeyDown);onKBChange()})();